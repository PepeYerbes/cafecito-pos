
<!-- src/app/pages/pos/pos.component.html -->
<h2>POS â€” Cafecito Feliz</h2>

<div *ngIf="errorMsg" class="error">{{ errorMsg }}</div>
<div *ngIf="loading">Procesando...</div>

<section class="row">
  <div class="col">
    <button (click)="createTicket()">âž• Nueva cuenta</button>

    <div *ngIf="sale as s">
      <p><strong>Ticket:</strong> {{ s._id }} â€” <em>{{ s.status }}</em></p>
      <p>Subtotal: {{ s.subtotal | number:'1.2-2' }}</p>
      <p>Descuento: {{ s.discountPercent }}% ({{ s.discountAmount | number:'1.2-2' }})</p>
      <p>Total: {{ s.total | number:'1.2-2' }}</p>
    </div>

    <div *ngIf="sale">
      <h3>Productos</h3>
      <div class="product-list">
        <div *ngFor="let p of products" class="product">
          <div class="name">{{ p.name }}</div>
          <div class="price">${{ p.price }}</div>
          <div class="actions">
            <button (click)="add(p)">+1</button>
            <button (click)="remove(p)">-1</button>
          </div>
        </div>
      </div>

      <h3>Items</h3>
      <ul>
        <li *ngFor="let it of sale.items">
          {{ it.quantity }} x {{ it.name }} = {{ it.lineSubtotal | number:'1.2-2' }}
        </li>
      </ul>

      <button (click)="pay()" class="pay">ðŸ’³ Pagar</button>
    </div>
  </div>

  <div class="col">
    <h3>Cuentas en espera</h3>
    <ul>
      <li *ngFor="let t of openSales">
        <button (click)="loadTicket(t._id)">
          {{ t._id }} â€” ${{ (t.total || t.subtotal) | number:'1.2-2' }}
        </button>
      </li>
    </ul>
  </div>
</section>
