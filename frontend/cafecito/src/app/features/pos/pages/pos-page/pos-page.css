/* ═══════════════════════════════════════════════
   pos-page.css — Cafecito Feliz POS
   ═══════════════════════════════════════════════ */

/* ── Layout principal ── */
.layout {
  display: flex;
  height: calc(100vh - 58px);  /* descuenta el navbar superior */
  overflow: hidden;
}

/* ══════════════════════════════════════════
   SIDEBAR — auto-hide con hover para volver
   ══════════════════════════════════════════ */
.sidebar {
  width: 220px;
  min-width: 220px;
  background: var(--dark-slate, #183a37);
  color: #fff;
  display: flex;
  flex-direction: column;
  padding: 20px 0 16px;
  overflow: hidden;

  /* ✅ Transición suave de ancho y opacidad */
  transition: min-width 0.35s ease, width 0.35s ease, opacity 0.35s ease;
  position: relative;
  z-index: 10;
}

/* Estado colapsado — se activa con clase CSS desde Angular */
.sidebar.collapsed {
  min-width: 0;
  width: 0;
  opacity: 0;
  padding: 0;
}

/* ── Zona de hover invisible para re-abrir el sidebar ── */
.sidebar-hover-zone {
  position: fixed;
  top: 58px;          /* debajo del navbar */
  left: 0;
  width: 18px;        /* franja estrecha en el borde izquierdo */
  height: calc(100vh - 58px);
  z-index: 20;
  cursor: e-resize;
}

/* ── Brand / Logo ── */
.brand {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 0 18px 20px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  white-space: nowrap;
}

.logo { font-size: 28px; }

.title .name {
  font-weight: 700;
  font-size: 14px;
  line-height: 1.2;
}

.muted { font-size: 11px; opacity: 0.55; }

/* ── Nav ── */
.nav {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 14px 10px;
  flex: 1;
}

.nav a {
  color: rgba(255,255,255,0.78);
  text-decoration: none;
  padding: 9px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 8px;
  white-space: nowrap;
  transition: background 0.15s, color 0.15s;
}

.nav a:hover,
.nav a.active {
  background: rgba(255,255,255,0.12);
  color: #fff;
}

.nav-icon { font-size: 16px; }

/* ── Estado de sesión ── */
.session {
  padding: 14px 14px 0;
  border-top: 1px solid rgba(255,255,255,0.1);
  margin-top: auto;
}

.badge {
  font-size: 11px;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  gap: 5px;
  white-space: nowrap;
}

.badge-open   { background: rgba(16,185,129,0.2); color: #6ee7b7; }
.badge-closed { background: rgba(239,68,68,0.2);  color: #fca5a5; }
.badge-loading { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.6); }

.session-actions {
  display: flex;
  gap: 6px;
  margin-top: 8px;
}

.btn-session {
  flex: 1;
  background: rgba(255,255,255,0.12);
  color: #fff;
  border: none;
  padding: 6px 8px;
  border-radius: 7px;
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.15s;
}
.btn-session:hover { background: rgba(255,255,255,0.22); }
.btn-session.outline { background: transparent; border: 1px solid rgba(255,255,255,0.2); }

/* ══════════════════════════════════════════
   CONTENIDO PRINCIPAL
   ══════════════════════════════════════════ */
.content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: #f5f0ec;
}

.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 22px;
  background: #fff;
  border-bottom: 1px solid #e5e7eb;
  flex-shrink: 0;
}

.topbar h1 {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
}

.session-badge {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
}
.dot.open   { background: #10b981; }
.dot.closed { background: #ef4444; }

/* ── Workspace (productos + carrito) ── */
.workspace {
  display: grid;
  grid-template-columns: 1fr 340px;
  gap: 0;
  flex: 1;
  overflow: hidden;
}

.pane {
  overflow-y: auto;
  padding: 16px;
}

.pane-products { background: #f5f0ec; }

.pane-narrow {
  background: #fff;
  border-left: 1px solid #e5e7eb;
  display: flex;
  flex-direction: column;
  gap: 0;
  overflow-y: auto;
}

.pane-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.pane-title {
  font-size: 15px;
  font-weight: 700;
  margin: 0;
}

.product-count { font-size: 12px; }

/* ── Empty / loading states ── */
.empty-state {
  text-align: center;
  padding: 48px 20px;
  color: #9ca3af;
}

.empty-icon { font-size: 40px; display: block; margin-bottom: 10px; }

.link {
  color: var(--accent, #c44900);
  text-decoration: underline;
  font-size: 13px;
}

.loading-overlay {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 60px;
  color: #9ca3af;
  font-size: 14px;
}

/* ══════════════════════════════════════════
   MODAL CHECKOUT
   ══════════════════════════════════════════ */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
  animation: fadeIn 0.15s ease;
  padding: 16px;           /* ✅ respira en móvil */
}

@keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }

.modal-card {
  background: #fff;
  border-radius: 16px;
  padding: 20px 22px;      /* ✅ reducido de 28px */
  width: min(460px, 100%);
  box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  animation: slideUp 0.2s ease;

  /* ✅ FIX: limitar altura y hacer scroll interno */
  max-height: calc(100vh - 32px);
  overflow-y: auto;
  overscroll-behavior: contain;
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0 }
  to   { transform: translateY(0);    opacity: 1 }
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;     /* ✅ reducido de 20px */
}

.modal-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
}

.modal-close {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  color: #9ca3af;
  padding: 4px 8px;
  border-radius: 6px;
  transition: background 0.15s;
}
.modal-close:hover { background: #f3f4f6; }

.checkout-summary {
  background: #f9fafb;
  border-radius: 10px;
  padding: 10px 14px;      /* ✅ reducido de 14px 16px */
  margin-bottom: 12px;     /* ✅ reducido de 18px */
}

.summary-row {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  padding: 3px 0;          /* ✅ reducido de 4px */
  color: #374151;
}

.total-row {
  border-top: 1.5px solid #e5e7eb;
  margin-top: 4px;
  padding-top: 6px;
  font-size: 14px;         /* ✅ reducido de 15px */
}

.total-amount { color: var(--accent, #c44900); }
.text-danger  { color: #ef4444; }

.checkout-field {
  margin-bottom: 10px;     /* ✅ reducido de 14px */
}

.field-label {
  display: block;
  font-size: 11px;         /* ✅ reducido de 12px */
  font-weight: 600;
  color: #374151;
  margin-bottom: 4px;
}

.checkout-input {
  width: 100%;
  box-sizing: border-box;
  padding: 7px 11px;       /* ✅ reducido de 8px 12px */
  border: 1.5px solid #d1d5db;
  border-radius: 8px;
  font-size: 13px;
  outline: none;
  transition: border-color 0.15s;
}
.checkout-input:focus { border-color: var(--accent, #c44900); }

.payment-methods {
  display: flex;
  gap: 6px;                /* ✅ reducido de 8px */
}

.payment-btn {
  flex: 1;
  padding: 8px 6px;        /* ✅ reducido de 10px */
  border: 2px solid #e5e7eb;
  border-radius: 10px;
  background: #fff;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  font-size: 11px;
  font-weight: 600;
  color: #374151;
  transition: border-color 0.15s, background 0.15s;
}

.payment-btn.selected {
  border-color: var(--accent, #c44900);
  background: #fff8f5;
  color: var(--accent, #c44900);
}

.pay-icon { font-size: 18px; }  /* ✅ reducido de 20px */

.customer-tag {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #f0fdf4;
  border: 1px solid #bbf7d0;
  border-radius: 8px;
  padding: 6px 10px;       /* ✅ reducido de 8px 12px */
  font-size: 13px;
}

.customer-points {
  background: #dcfce7;
  color: #166534;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
}

/* Loyalty badge */
.loyalty-badge {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 5px;
  padding: 5px 10px;       /* ✅ reducido */
  background: linear-gradient(135deg, #fef9c3, #fef08a);
  border: 1px solid #fde047;
  border-radius: 8px;
  font-size: 12px;
  color: #713f12;
  font-weight: 500;
}

.loyalty-badge strong { color: #c44900; font-size: 12px; }
.loyalty-amount { margin-left: auto; font-weight: 700; color: #c44900; }
.loyalty-new { background: #f9fafb; border-color: #e5e7eb; color: #9ca3af; font-style: italic; }

.modal-actions {
  display: flex;
  gap: 10px;
  margin-top: 14px;        /* ✅ reducido de 20px */
  position: sticky;        /* ✅ botones siempre visibles al fondo */
  bottom: 0;
  background: #fff;
  padding-bottom: 2px;
}

.btn {
  flex: 1;
  padding: 10px 16px;
  border: none;
  border-radius: 9px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.15s;
}
.btn:disabled { opacity: 0.55; cursor: not-allowed; }
.btn.outline  { background: #f3f4f6; color: #374151; flex: 0 0 auto; padding: 10px 20px; }
.btn.success  { background: var(--accent, #c44900); color: #fff; }
.btn:hover:not(:disabled) { opacity: 0.88; }

/* ══════════════════════════════════════════
   BANNER POST-VENTA
   ══════════════════════════════════════════ */
.ticket-banner {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #065f46;
  color: #fff;
  padding: 12px 20px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 13px;
  font-weight: 500;
  box-shadow: 0 4px 20px rgba(0,0,0,0.25);
  z-index: 300;
  animation: slideUp 0.25s ease;
  white-space: nowrap;
  flex-wrap: wrap;
  justify-content: center;
}

.ticket-link {
  background: rgba(255,255,255,0.2);
  color: #fff;
  border: none;
  padding: 5px 12px;
  border-radius: 7px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  transition: background 0.15s;
}
.ticket-link:hover { background: rgba(255,255,255,0.3); }

.ticket-dismiss {
  background: none;
  border: none;
  color: rgba(255,255,255,0.7);
  cursor: pointer;
  font-size: 16px;
  padding: 0 4px;
}

/* ── Responsive ── */
@media (max-width: 900px) {
  .workspace { grid-template-columns: 1fr; }
  .pane-narrow { border-left: none; border-top: 1px solid #e5e7eb; }
}